# API для управления студентами с JWT и документацией

## О проекте

Этот проект представляет собой RESTful API для управления данными студентов, разработанный с использованием Flask, APIFlask, JWT-аутентификации и ORM Peewee.
API включает автоматически генерируемую документацию в формате OpenAPI 3.0 и защиту маршрутов с помощью JWT-токенов.

## Структура проекта

```
flask_api_411/
│
├── app.py                # Основной файл приложения
├── config.py             # Конфигурация приложения
├── models.py             # Модели данных (Peewee ORM)
├── requirements.txt      # Зависимости проекта
│
├── api/                  # Пакет для API
│   ├── __init__.py       # Инициализация пакета
│   ├── auth.py           # Модуль аутентификации
│   └── routes/           # Модули маршрутов
│       ├── __init__.py   # Инициализация пакета маршрутов
│       ├── auth.py       # Маршруты для аутентификации
│       └── students.py   # Маршруты для работы со студентами
```

## Зависимости

- Python 3.10+
- Flask 3.1.0
- APIFlask 2.1.0
- Peewee 3.17.9
- PyJWT 2.9.0
- Passlib 1.7.4

## Установка и запуск

1. Клонируйте репозиторий:

```bash
git clone <url-репозитория>
cd flask_api_411
```

2. Установите зависимости:

```bash
pip install -r requirements.txt
```

3. Запустите приложение:

```bash
python app.py
```

Приложение будет доступно по адресу [http://localhost:5000](http://localhost:5000), а документация API — по адресу [http://localhost:5000/api/docs](http://localhost:5000/api/docs)

## Использование API

### Аутентификация

Для доступа к защищенным маршрутам необходимо получить JWT-токен:

1. Зарегистрируйтесь:

```bash
curl -X POST http://localhost:5000/api/auth/register \
     -H "Content-Type: application/json" \
     -d '{"username": "test_user", "password": "secure_password"}'
```

2. Получите токен:

```bash
curl -X POST http://localhost:5000/api/auth/login \
     -H "Content-Type: application/json" \
     -d '{"username": "test_user", "password": "secure_password"}'
```

3. Используйте токен в заголовке Authorization:

```bash
curl -X GET http://localhost:5000/api/student/1 \
     -H "Authorization: Bearer ваш_токен_здесь"
```

### Доступные маршруты

#### Аутентификация

- `POST /api/auth/login` - Вход в систему и получение JWT-токена
- `POST /api/auth/register` - Регистрация нового пользователя

#### Студенты

- `GET /api/student/{id}` - Получение данных конкретного студента по его идентификатору
- `POST /api/students/create` - Создание записи о новом студенте

## Развитие проекта

Эта модульная структура позволяет легко добавлять новые маршруты и функциональности:

1. Для добавления нового типа сущностей (например, преподавателей):
   - Создайте новый файл маршрутов в `api/routes/`
   - Определите схемы данных и маршруты в этом файле
   - Зарегистрируйте Blueprint в `app.py`

2. Для добавления новых маршрутов существующих сущностей:
   - Добавьте маршруты в соответствующий файл в `api/routes/`

## Особенности

- Модульная структура на основе Blueprints
- Автоматическая документация API с возможностью тестирования
- Валидация входящих данных на основе схем
- JWT-аутентификация для защиты маршрутов
- ORM Peewee для работы с базой данных
